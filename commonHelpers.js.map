{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\n\nconst lightbox = new SimpleLightbox('.js-list a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n    enableKeyboard: true,\n    docClose: true,\n});\n\n\nconst form = document.querySelector(\".js-form\");\nform.addEventListener(\"submit\", onSearch);\nconst list = document.querySelector(\".js-list\");\nconst loader = document.querySelector(\".loader\");\nconst button = document.querySelector(\".js-button\");\nbutton.addEventListener(\"click\", loadMore);\n\nconst domRect = list.getBoundingClientRect().width;\nconsole.log(domRect);\nwindow.scrollTo(0, `${domRect}`);\n\n\nlet currentPage = 1;\nlet wordForSearch;\nbutton.style.display = 'none';\n\nfunction loadMore() {\n    currentPage += 1;\n    loader.style.display = 'block';\n    getPhoto(wordForSearch,currentPage)\n};\n\n\nfunction onSearch(evt) {\n    evt.preventDefault();\n    wordForSearch = evt.currentTarget.elements.input.value;\n    getPhoto(wordForSearch);\n    button.style.display = 'block';\n};\n\n\nasync function getPhoto(wordForSearch,page=1) {\n    loader.style.display = 'block';\n    await axios.get( \"https://pixabay.com/api/\",{\n        params: {\n        key: \"41617344-22077a3acba128accdfbcd745\",\n\t\tq:`${wordForSearch}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: `${page}`,\n        per_page: \"40\"\n\t}\n    }).then(responce => {  \n        if (!responce.data.total) {\n            button.style.display = 'none'\n            form.reset()\n            iziToast.error({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            })\n        }\n        \n        loader.style.display = 'none';\n        list.insertAdjacentHTML(\"beforeend\",createMarkup(responce.data.hits))\n        lightbox.refresh();\n        \n    })\n    .catch(error =>  iziToast.error({\n                position:'topRight',\n                message: `\"${error}\"`\n            }))\n};\n\n\nfunction createMarkup(arr) {\n    return arr.map(({webformatURL,largeImageURL,tags,likes,views,comments,downloads}) =>` <li>\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" width=\"350px\" height=\"250px\"></a>\n    <ul class=\"discription-list\">\n    <li class=\"discription-item\">\n        <h2>Likes</h2>\n        <p>${likes}</p></li>\n    <li class=\"discription-item\">\n        <h2>Views</h2>\n        <p>${views}</p>\n    </li>\n    <li class=\"discription-item\">\n        <h2>Comments</h2>\n        <p>${comments}</p>\n    </li>\n    <li class=\"discription-item\">\n        <h2>Download</h2>\n        <p>${downloads}</p>\n    </li>\n    </ul>\n    </li>`\n    ).join('');\n};\n"],"names":["lightbox","SimpleLightbox","form","onSearch","list","loader","button","loadMore","domRect","currentPage","wordForSearch","getPhoto","evt","page","axios","responce","iziToast","createMarkup","error","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAOA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAC,EAGKC,EAAO,SAAS,cAAc,UAAU,EAC9CA,EAAK,iBAAiB,SAAUC,CAAQ,EACxC,MAAMC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAS,SAAS,cAAc,YAAY,EAClDA,EAAO,iBAAiB,QAASC,CAAQ,EAEzC,MAAMC,EAAUJ,EAAK,sBAAuB,EAAC,MAC7C,QAAQ,IAAII,CAAO,EACnB,OAAO,SAAS,EAAG,GAAGA,GAAS,EAG/B,IAAIC,EAAc,EACdC,EACJJ,EAAO,MAAM,QAAU,OAEvB,SAASC,GAAW,CAChBE,GAAe,EACfJ,EAAO,MAAM,QAAU,QACvBM,EAASD,EAAcD,CAAW,CACtC,CAGA,SAASN,EAASS,EAAK,CACnBA,EAAI,eAAc,EAClBF,EAAgBE,EAAI,cAAc,SAAS,MAAM,MACjDD,EAASD,CAAa,EACtBJ,EAAO,MAAM,QAAU,OAC3B,CAGA,eAAeK,EAASD,EAAcG,EAAK,EAAG,CAC1CR,EAAO,MAAM,QAAU,QACvB,MAAMS,EAAM,IAAK,2BAA2B,CACxC,OAAQ,CACR,IAAK,qCACX,EAAE,GAAGJ,IACC,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAM,GAAGG,IACT,SAAU,IAChB,CACF,CAAK,EAAE,KAAKE,GAAY,CACXA,EAAS,KAAK,QACfT,EAAO,MAAM,QAAU,OACvBJ,EAAK,MAAO,EACZc,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACzB,CAAa,GAGLX,EAAO,MAAM,QAAU,OACvBD,EAAK,mBAAmB,YAAYa,EAAaF,EAAS,KAAK,IAAI,CAAC,EACpEf,EAAS,QAAO,CAExB,CAAK,EACA,MAAMkB,GAAUF,EAAS,MAAM,CACpB,SAAS,WACT,QAAS,IAAIE,IAC7B,CAAa,CAAC,CACd,CAGA,SAASD,EAAaE,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAC,aAAAC,EAAa,cAAAC,EAAc,KAAAC,EAAK,MAAAC,EAAM,MAAAC,EAAM,SAAAC,EAAS,UAAAC,CAAS,IAAK;AAAA,eACzEL,gBAA4BD,WAAsBE;AAAA;AAAA;AAAA;AAAA,aAIpDC;AAAA;AAAA;AAAA,aAGAC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA,UAIb,EAAM,KAAK,EAAE,CACb"}