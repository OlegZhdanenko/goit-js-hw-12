{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\n\nconst lightbox = new SimpleLightbox('.js-list a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n    enableKeyboard: true,\n    docClose: true,\n});\n\n\nconst form = document.querySelector(\".js-form\");\nform.addEventListener(\"submit\", onSearch);\nconst list = document.querySelector(\".js-list\");\nconst loader = document.querySelector(\".loader\");\nconst button = document.querySelector(\".js-button\");\nbutton.addEventListener(\"click\", loadMore);\n\nconst domRect = list.getBoundingClientRect().width;\nwindow.scrollTo(0, `${domRect}`);\n\nconst perPage = 40;\nlet currentPage = 12;\nlet lastPage;\nlet wordForSearch;\nbutton.style.display = 'none';\n\nfunction loadMore() {\n    currentPage += 1;\n    loader.style.display = 'block';\n    getPhoto(wordForSearch, currentPage)\n    \n};\n\nfunction endCollection() {\n    if (lastPage===currentPage) {\n        button.style.display = 'none'\n        list.insertAdjacentHTML(\"beforeend\",`<p>\"We're sorry, but you've reached the end of search results.\"</p>`)\n    }\n};\n\nfunction onSearch(evt) {\n    evt.preventDefault();\n    wordForSearch = evt.currentTarget.elements.input.value;\n    getPhoto(wordForSearch);\n    button.style.display = 'block';\n    form.reset()\n};\n\n\nasync function getPhoto(wordForSearch,page=1) {\n    loader.style.display = 'block';\n    await axios.get( \"https://pixabay.com/api/\",{\n        params: {\n        key: \"41617344-22077a3acba128accdfbcd745\",\n\t\tq:`${wordForSearch}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: `${page}`,\n        per_page: `${perPage}`\n\t}\n    }).then(responce => {  \n        if (!responce.data.total) {\n            button.style.display = 'none'\n            form.reset()\n            iziToast.error({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            })\n        }\n\n        loader.style.display = 'none';\n        list.insertAdjacentHTML(\"beforeend\", createMarkup(responce.data.hits))\n        lastPage = Math.ceil(responce.data.totalHits / `${perPage}`)\n        endCollection();\n        lightbox.refresh();\n        \n\n    })\n    .catch(error =>  iziToast.error({\n                position:'topRight',\n                message: `\"${error}\"`\n            }))\n};\n\n\nfunction createMarkup(arr) {\n    return arr.map(({webformatURL,largeImageURL,tags,likes,views,comments,downloads}) =>` <li>\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" width=\"350px\" height=\"250px\"></a>\n    <ul class=\"discription-list\">\n    <li class=\"discription-item\">\n        <h2>Likes</h2>\n        <p>${likes}</p></li>\n    <li class=\"discription-item\">\n        <h2>Views</h2>\n        <p>${views}</p>\n    </li>\n    <li class=\"discription-item\">\n        <h2>Comments</h2>\n        <p>${comments}</p>\n    </li>\n    <li class=\"discription-item\">\n        <h2>Download</h2>\n        <p>${downloads}</p>\n    </li>\n    </ul>\n    </li>`\n    ).join('');\n};\n"],"names":["lightbox","SimpleLightbox","form","onSearch","list","loader","button","loadMore","domRect","perPage","currentPage","lastPage","wordForSearch","getPhoto","endCollection","evt","page","axios","responce","iziToast","createMarkup","error","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAOA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAC,EAGKC,EAAO,SAAS,cAAc,UAAU,EAC9CA,EAAK,iBAAiB,SAAUC,CAAQ,EACxC,MAAMC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAS,SAAS,cAAc,YAAY,EAClDA,EAAO,iBAAiB,QAASC,CAAQ,EAEzC,MAAMC,EAAUJ,EAAK,sBAAuB,EAAC,MAC7C,OAAO,SAAS,EAAG,GAAGI,GAAS,EAE/B,MAAMC,EAAU,GAChB,IAAIC,EAAc,GACdC,EACAC,EACJN,EAAO,MAAM,QAAU,OAEvB,SAASC,GAAW,CAChBG,GAAe,EACfL,EAAO,MAAM,QAAU,QACvBQ,EAASD,EAAeF,CAAW,CAEvC,CAEA,SAASI,GAAgB,CACjBH,IAAWD,IACXJ,EAAO,MAAM,QAAU,OACvBF,EAAK,mBAAmB,YAAY,qEAAqE,EAEjH,CAEA,SAASD,EAASY,EAAK,CACnBA,EAAI,eAAc,EAClBH,EAAgBG,EAAI,cAAc,SAAS,MAAM,MACjDF,EAASD,CAAa,EACtBN,EAAO,MAAM,QAAU,QACvBJ,EAAK,MAAO,CAChB,CAGA,eAAeW,EAASD,EAAcI,EAAK,EAAG,CAC1CX,EAAO,MAAM,QAAU,QACvB,MAAMY,EAAM,IAAK,2BAA2B,CACxC,OAAQ,CACR,IAAK,qCACX,EAAE,GAAGL,IACC,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAM,GAAGI,IACT,SAAU,GAAGP,GACnB,CACF,CAAK,EAAE,KAAKS,GAAY,CACXA,EAAS,KAAK,QACfZ,EAAO,MAAM,QAAU,OACvBJ,EAAK,MAAO,EACZiB,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACzB,CAAa,GAGLd,EAAO,MAAM,QAAU,OACvBD,EAAK,mBAAmB,YAAagB,EAAaF,EAAS,KAAK,IAAI,CAAC,EACrEP,EAAW,KAAK,KAAKO,EAAS,KAAK,UAAY,GAAGT,GAAS,EAC3DK,IACAd,EAAS,QAAO,CAGxB,CAAK,EACA,MAAMqB,GAAUF,EAAS,MAAM,CACpB,SAAS,WACT,QAAS,IAAIE,IAC7B,CAAa,CAAC,CACd,CAGA,SAASD,EAAaE,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAC,aAAAC,EAAa,cAAAC,EAAc,KAAAC,EAAK,MAAAC,EAAM,MAAAC,EAAM,SAAAC,EAAS,UAAAC,CAAS,IAAK;AAAA,eACzEL,gBAA4BD,WAAsBE;AAAA;AAAA;AAAA;AAAA,aAIpDC;AAAA;AAAA;AAAA,aAGAC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA,UAIb,EAAM,KAAK,EAAE,CACb"}